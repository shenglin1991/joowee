<div class="conversations-header">
  <h3>Conversations</h3>
</div>

<div class="conversations-list">
  <div 
    *ngFor="let conversation of conversations()" 
    class="conversation-item"
    [class.active]="selectedConversationId() === conversation.id"
    [class.offline]="!(conversation | otherParticipant)?.isOnline"
    (click)="conversationSelected.emit(conversation)"
  >
    <div class="conversation-avatar" [class.offline-avatar]="!(conversation | otherParticipant)?.isOnline">
      {{ (conversation | otherParticipant)?.username | initial }}
    </div>
    <div class="conversation-info">
      <div class="conversation-name">
        {{ (conversation | otherParticipant)?.username || 'Utilisateur inconnu' }}
      </div>
      <div class="last-message" *ngIf="conversation.lastMessage">
        {{ conversation.lastMessage.content }}
      </div>
    </div>
    <div class="conversation-meta">
      <div class="timestamp" *ngIf="conversation.lastMessage">
        {{ formatTime(conversation.lastMessage.timestamp) }}
      </div>
      <div class="unread-count" *ngIf="conversation.unreadCount > 0">
        {{ conversation.unreadCount }}
      </div>
    </div>
  </div>
</div>
